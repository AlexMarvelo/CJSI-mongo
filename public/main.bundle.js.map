{"version":3,"sources":["webpack:///webpack/bootstrap 8c50ce97cca678d0de43","webpack:///./src/app.js","webpack:///./src/search.js","webpack:///./src/config.js"],"names":["movieSearch","searchBlockId","moviesContainerId","favMoviesContainerId","paginationId","SearchEngine","setup","form","document","querySelector","input","searchBtn","yearInput","typeInput","paginationContainer","getElementById","container","favContainer","currentPage","favList","addEventListener","searchMovies","bind","handleFavourite","event","preventDefault","target","classList","contains","card","findAncestor","dataset","id","add","queryObj","i","queryString","convertToQueryString","handleQuery","remove","movieIndex","inFavourites","splice","page","searchQuery","value","length","s","toString","type","toLowerCase","y","self","promise","Promise","resolve","reject","httpRequest","window","XMLHttpRequest","ActiveXObject","updateMovies","readyState","DONE","status","result","JSON","parse","responseText","onreadystatechange","open","send","then","data","Response","pushMessageToContainer","Search","push","updateMoviesList","setPagination","totalResults","error","Error","catch","pushError","innerHTML","forEach","movie","pushMovieCardToContainer","qObj","hasOwnProperty","byId","byTitle","domain","api","key","replace","slice","favourite","imdbID","cardContainer","createElement","cardEl","setAttribute","Poster","img","Title","appendChild","caption","title","createTextNode","Year","year","Type","favBtn","insertBefore","firstChild","totalCardsAmount","list","parseInt","totalPagesAmount","Math","ceil","cardsPerPage","abs","item","message","alertBlock","console","alertContainer","movieId","index","el","cls","parentElement"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8c50ce97cca678d0de43\n **/","import SearchEngine from './search.js';\n\nconst movieSearch = new SearchEngine({\n  searchBlockId: 'search-group',\n  moviesContainerId: 'movies-container',\n  favMoviesContainerId: 'movies-container-favourite',\n  paginationId: 'pagination-container',\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.js\n **/","import config from './config.js';\n\nexport default class SearchEngine {\n  constructor(setup) {\n    this.form = document.querySelector(`form[name=\"${setup.searchBlockId}\"]`);\n    if (!this.form) return;\n    this.input = this.form.querySelector('input[name=\"search\"]');\n    this.searchBtn = this.form.querySelector('button[type=\"submit\"]');\n    this.yearInput = this.form.querySelector('input[name=\"year\"]');\n    this.typeInput = this.form.querySelector('input[name=\"type\"]');\n    this.paginationContainer = document.getElementById(setup.paginationId);\n    this.container = document.getElementById(setup.moviesContainerId);\n    this.favContainer = document.getElementById(setup.favMoviesContainerId);\n    this.currentPage = 0;\n    this.favList = [];\n\n    this.form.addEventListener('submit', this.searchMovies.bind(this));\n\n    this.container.addEventListener('click', this.handleFavourite.bind(this));\n    this.favContainer.addEventListener('click', this.handleFavourite.bind(this));\n  }\n\n  handleFavourite(event) {\n    event.preventDefault();\n    if (!event.target.classList.contains('btn-favourite') &&\n        !event.target.classList.contains('btn-favourite-text') &&\n        !event.target.classList.contains('glyphicon-star')) return;\n    let card = findAncestor(event.target, 'thumbnail');\n    if (!card || !card.dataset.id) return;\n    if (!card.classList.contains('thumbnail-favourite')) {\n      card.classList.add('thumbnail-favourite');\n      let queryObj = {\n        i: card.dataset.id,\n      };\n      let queryString = this.convertToQueryString(queryObj);\n      this.handleQuery(queryString);\n    } else {\n      card.classList.remove('thumbnail-favourite');\n      let movieIndex = this.inFavourites(card.dataset.id);\n      if (card.dataset.id && movieIndex !== -1) {\n        this.favList.splice(movieIndex, 1);\n      }\n    }\n  }\n\n  searchMovies(event, page) {\n    this.currentPage = page || 1;\n    if (event) event.preventDefault();\n    let searchQuery = this.input.value;\n    if (!searchQuery.length) return;\n    let queryObj = {\n      s: searchQuery,\n      page: this.currentPage.toString(),\n    };\n    if (this.typeInput && this.typeInput.value.length) {\n      queryObj.type = this.typeInput.value.toLowerCase();\n    }\n    if (this.typeInput && this.yearInput.value.length) {\n      queryObj.y = this.yearInput.value.toLowerCase();\n    }\n    let queryString = this.convertToQueryString(queryObj);\n    this.handleQuery(queryString);\n  }\n\n  handleQuery(queryString) {\n    if (!queryString.length) return;\n    let self = this;\n    let promise = new Promise((resolve, reject) => {\n      let httpRequest;\n      if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+ ...\n        httpRequest = new XMLHttpRequest();\n      } else if (window.ActiveXObject) { // IE 6 and older\n        httpRequest = new ActiveXObject('Microsoft.XMLHTTP');\n      }\n      let updateMovies = function () {\n        if (httpRequest.readyState === XMLHttpRequest.DONE) {\n          if (httpRequest.status === 200) {\n            let result = JSON.parse(httpRequest.responseText);\n            resolve(result);\n          } else {\n            reject('There was a problem with the request.');\n          }\n        }\n      };\n      httpRequest.onreadystatechange = updateMovies.bind(this);\n      httpRequest.open('GET', queryString);\n      httpRequest.send();\n    }).then(\n      (data) => {\n        // console.log(data);\n        if (data.Response === 'False') {\n          this.pushMessageToContainer('error', 'Sorry, movie not found');\n          return;\n        }\n        if (!data.Search) {\n          self.favList.push(data);\n          return;\n        }\n        self.updateMoviesList(data);\n        self.setPagination(data.totalResults);\n      },\n      (error) => {\n        throw new Error(error);\n      }\n    );\n    promise.catch(this.pushError.bind(this));\n  }\n\n  updateMoviesList(data) {\n    this.container.innerHTML = '';\n    this.favList.forEach((movie) => {\n      this.pushMovieCardToContainer(movie, true);\n    });\n    data.Search.forEach((movie) => {\n      this.pushMovieCardToContainer(movie);\n    });\n  }\n\n  convertToQueryString(qObj) {\n    if (typeof qObj !== 'object') return;\n    let searchQuery = qObj.hasOwnProperty('s');\n    let byId = qObj.hasOwnProperty('i');\n    let byTitle = qObj.hasOwnProperty('t');\n    if (!searchQuery && !byId && !byTitle) return;\n    let result = `${config.domain}?apikey=${config.api}&`;\n    for (let key in qObj) {\n      if (!qObj.hasOwnProperty(key)) continue;\n      result += `${key}=${qObj[key].replace(' ', '+')}&`;\n    }\n    // console.log(result);\n    return result.slice(0, -1);\n  }\n\n  pushMovieCardToContainer(card, favourite = false) {\n    if (!favourite && this.inFavourites(card.imdbID) !== -1) return;\n    favourite = favourite && (this.inFavourites(card.imdbID) !== -1);\n    let cardContainer = document.createElement('DIV');\n    cardContainer.classList.add('movie-card', 'col-sm-6', 'col-md-4', 'col-lg-3');\n    let cardEl = document.createElement('DIV');\n    cardEl.classList.add('thumbnail');\n    if (card.imdbID) {\n      cardEl.setAttribute('data-id', card.imdbID);\n      if (favourite) cardEl.classList.add('thumbnail-favourite');\n    }\n    if (card.Poster) {\n      let img = document.createElement('IMG');\n      if (card.Poster === 'N/A') {\n        img.setAttribute('src', 'http://placehold.it/280x390');\n      } else {\n        img.setAttribute('src', card.Poster);\n      }\n      if (card.Title) img.setAttribute('alt', card.Title);\n      cardEl.appendChild(img);\n    }\n    let caption = document.createElement('DIV');\n    caption.classList.add('caption');\n    if (card.Title) {\n      let title = document.createElement('H3');\n      title.appendChild(document.createTextNode(card.Title));\n      caption.appendChild(title);\n    }\n    if (card.Year) {\n      let year = document.createElement('SPAN');\n      year.appendChild(document.createTextNode(card.Year));\n      year.classList.add('badge');\n      caption.appendChild(year);\n    }\n    if (card.Type) {\n      let type = document.createElement('SPAN');\n      type.appendChild(document.createTextNode(card.Type));\n      type.classList.add('badge');\n      caption.appendChild(type);\n    }\n    let favBtn = document.createElement('BUTTON');\n    favBtn.classList.add('btn', 'btn-default', 'btn-favourite');\n    favBtn.setAttribute('type', 'button');\n    favBtn.innerHTML = `<span class=\"glyphicon glyphicon-star\" aria-hidden=\"true\"></span>\n    <span class=\"btn-favourite-text btn-favourite-text-add\">Add to favourites</span>\n    <span class=\"btn-favourite-text btn-favourite-text-remove\">Remove from favourites</span>`;\n    caption.appendChild(favBtn);\n    cardEl.appendChild(caption);\n    cardContainer.appendChild(cardEl);\n    if (favourite) {\n      this.container.insertBefore(cardContainer, this.container.firstChild);\n      return;\n    }\n    this.container.appendChild(cardContainer);\n  }\n\n  setPagination(totalCardsAmount) {\n    // this.paginationContainer\n    let list = this.paginationContainer.querySelector('ul.pagination');\n    if (!list) {\n      list = document.createElement('UL');\n      list.classList.add('pagination');\n      list.addEventListener('click', (event) => {\n        this.searchMovies(event, parseInt(event.target.dataset.id, 10));\n      });\n      this.paginationContainer.appendChild(list);\n    }\n    list.innerHTML = '';\n    let totalPagesAmount = Math.ceil(totalCardsAmount / config.cardsPerPage);\n    if (totalPagesAmount < 2) return;\n    for (let i = 1; i <= totalPagesAmount; i++) {\n      if (Math.abs(i - 1) > 4 &&\n          Math.abs(i - this.currentPage) > 4 &&\n          Math.abs(i - totalPagesAmount) > 4) continue;\n      let item = document.createElement('LI');\n      if ((Math.abs(i - 1) === 4 && Math.abs(1 - this.currentPage) > 8) ||\n      (Math.abs(i - totalPagesAmount) === 4 && Math.abs(totalPagesAmount - this.currentPage) > 8)) {\n        item.classList.add('disabled');\n        item.innerHTML = '<a href=\"#\">...</a>';\n        list.appendChild(item);\n        continue;\n      }\n      if (i === this.currentPage) item.classList.add('active');\n      item.innerHTML = `<a href=\"#\" data-id=\"${i}\">${i}</a>`;\n      list.appendChild(item);\n    }\n  }\n\n  pushMessageToContainer(type, message) {\n    this.container.innerHTML = '';\n    this.favContainer.innerHTML = '';\n    this.paginationContainer.innerHTML = '';\n    let alertBlock = document.createElement('DIV');\n    alertBlock.classList.add('alert');\n    alertBlock.classList.add('col-sm-6');\n    alertBlock.classList.add('col-sm-push-3');\n    if (type === 'error') alertBlock.classList.add('alert-danger');\n    alertBlock.appendChild(document.createTextNode(message));\n    this.container.appendChild(alertBlock);\n  }\n\n  pushError(error) {\n    console.error(error);\n    let alertContainer = document.getElementById('alert-block-container');\n    let alertBlock = document.createElement('DIV');\n    alertBlock.classList.add('alert');\n    alertBlock.classList.add('alert-danger');\n    alertBlock.classList.add('text-center');\n    alertBlock.classList.add('col-sm-6');\n    alertBlock.classList.add('col-sm-push-3');\n    alertBlock.appendChild(document.createTextNode(error));\n    alertContainer.appendChild(alertBlock);\n  }\n\n  inFavourites(movieId) {\n    let movieIndex = -1;\n    this.favList.forEach((movie, index) => {\n      if (movie.imdbID === movieId) {\n        movieIndex = index;\n      }\n    });\n    return movieIndex;\n  }\n}\n\nfunction findAncestor(el, cls) {\n  while (!el.classList.contains(cls)) {\n    el = el.parentElement;\n  }\n  return el;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/search.js\n **/","export default {\n  domain: 'http://www.omdbapi.com/',\n  api: '6f0a67d0',\n  cardsPerPage: 10,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/config.js\n **/"],"sourceRoot":""}